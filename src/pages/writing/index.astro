---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Nav from '../../components/Nav.astro';
import Footer from '../../components/Footer.astro';
import WritingList from '../../components/WritingList.astro';
import { getCollection } from 'astro:content';

const writingPosts = await getCollection('writing', ({ data }) => !data.draft);
const sortedPosts = writingPosts
  .map(post => ({
    slug: post.slug,
    title: post.data.title,
    date: post.data.date,
    description: post.data.description,
  }))
  .sort((a, b) => b.date.getTime() - a.date.getTime());
---

<BaseLayout title="Writing">
  <div class="min-h-screen flex flex-col">
    <Nav current="writing" />

    <main class="flex-1 pt-24 sm:pt-32 pb-16 max-w-content mx-auto px-4 sm:px-6">
      <header class="mb-8 sm:mb-12">
        <h1 class="font-display text-2xl sm:text-display text-ink mb-3">Writing</h1>
        <p class="font-charter text-base sm:text-lg text-secondary">
          Thoughts on engineering, design, and everything in between.
        </p>
      </header>

      <WritingList posts={sortedPosts} />
    </main>

    <Footer />
  </div>
</BaseLayout>
